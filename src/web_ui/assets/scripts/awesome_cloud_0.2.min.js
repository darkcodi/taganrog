!function(t){"use strict";var e="awesomeCloud",i={size:{grid:8,factor:0,normalize:!0},color:{background:"rgba(255,255,255,0)",start:"#20f",end:"#e00"},options:{color:"gradient",rotationRatio:.3,printMultiplier:1,sort:"highest"},font:"Helvetica, Arial, sans-serif",shape:"circle"};function s(t,e){return this.bctx=null,this.bgPixel=null,this.ctx=null,this.diffChannel=null,this.container=e,this.grid=[],this.ngx=null,this.ngy=null,this.settings=t,this.size=null,this.words=[],this.linkTable=[],this.match=null,this}t.fn.awesomeCloud=function(n,r){if("object"==typeof n)r=n;else if("string"==typeof n){var o=this.data("_"+e);return!!o&&void 0!==i[n]&&(void 0!==r?(o.settings[n]=r,!0):o.settings[n])}return r=t.extend(!0,{},i,r||{}),this.each(function(){var i=t(this),n=jQuery.extend(!0,{},r),o=new s(n,i);o.create(),i.data("_"+e,o)})},s.prototype={create:function(){var i,s,n,r,o,a=this,h=0,l=null,g=0,f=0,d=e+"TempCheck",c=null,$=!1,u=0,m=.1,_=0,b=0,p=0,w=0,y=null,x=null,v=null;switch(this.settings.weightFactor=function(t){return t*a.settings.size.factor},this.settings.gridSize=Math.max(this.settings.size.grid,4)*this.settings.options.printMultiplier,this.settings.color.start=this.colorToRGBA(this.settings.color.start),this.settings.color.end=this.colorToRGBA(this.settings.color.end),this.settings.color.background=this.colorToRGBA(this.settings.color.background),this.settings.minSize=this.minimumFontSize(),this.settings.ellipticity=1,this.settings.shape){case"square":this.settings.shape=function(t){var e=(t+Math.PI/4)%(2*Math.PI/4);return 1/(Math.cos(e)+Math.sin(e))};break;case"diamond":this.settings.shape=function(t){var e=t%(2*Math.PI/4);return 1/(Math.cos(e)+Math.sin(e))};break;case"x":this.settings.shape=function(t){var e=t%(2*Math.PI/4);return 1/(Math.cos(e)+Math.sin(e)-2*Math.PI/4)};break;case"triangle":this.settings.shape=function(t){var e=(t+3*Math.PI/2)%(2*Math.PI/3);return 1/(Math.cos(e)+Math.sqrt(3)*Math.sin(e))};break;case"triangle-forward":this.settings.shape=function(t){var e=t%(2*Math.PI/3);return 1/(Math.cos(e)+Math.sqrt(3)*Math.sin(e))};break;case"pentagon":this.settings.shape=function(t){var e=(t+.955)%(2*Math.PI/5);return 1/(Math.cos(e)+.726543*Math.sin(e))};break;case"star":this.settings.shape=function(t){var e=(t+.955)%(2*Math.PI/10);return(t+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-e)+3.07768*Math.sin(2*Math.PI/10-e)):1/(Math.cos(e)+3.07768*Math.sin(e))};break;case"circle":this.settings.shape=function(t){return 1};break;default:this.settings.shape=function(t){return 1}}if(this.size={left:this.container.offset().left,top:this.container.offset().top,height:this.container.height()*this.settings.options.printMultiplier,width:this.container.width()*this.settings.options.printMultiplier,screenHeight:this.container.height(),screenWidth:this.container.width()},this.settings.ellipticity=this.size.height/this.size.width,this.settings.ellipticity>2&&(this.settings.ellipticity=2),this.settings.ellipticity<.2&&(this.settings.ellipticity=.2),this.settings.weight={lowest:null,highest:null,average:null},this.container.children().each(function(e,i){if(y=null,v=null,g+=f=parseInt(t(this).attr("data-weight"),10),a.settings.weight.lowest||(a.settings.weight.lowest=f),a.settings.weight.highest||(a.settings.weight.highest=f),f<a.settings.weight.lowest&&(a.settings.weight.lowest=f),f>a.settings.weight.highest&&(a.settings.weight.highest=f),a.settings.weight.average=g/(e+1),t(this).css("display","none"),0===t(this).has("a").length)v=t(this).html();else{var s=t(this).children(":first");y=s.attr("href"),x=s.attr("target"),v=s.html()}a.words.push([v,f,y,x])}),this.settings.range=this.settings.weight.highest-this.settings.weight.lowest,!0===this.settings.size.normalize)for(this.words.sort(function(t,e){return t[1]-e[1]}),h=0;h<this.words.length;h++)null===c?c=this.words[h][1]:this.words[h][1]-c>this.settings.weight.average&&(this.words[h][1]-=(this.words[h][1]-c)/(.38*this.settings.weight.average)+c);if(this.words.sort(function(t,e){return"random"===a.settings.options.sort?.5-Math.random():"lowest"===a.settings.options.sort?t[1]-e[1]:e[1]-t[1]}),this.settings.size.factor===parseInt(0,10)){for(h=0,this.settings.size.factor=1,l=e+"SizeTest",$=!1,u=0,m=.1,_=0,b=0,p=0,w=0,i=Math.min(this.size.width,this.size.height),s=this.createCanvas({id:l,width:i,height:i,left:0,top:0});h<this.words.length;h++)s.font=this.settings.weightFactor(this.words[h][1])+"px "+this.settings.font,(w=s.measureText(this.words[h][0]).width)>_&&(_=w,b=this.words[h]);for(;!$;)u=this.settings.weightFactor(b[1]),s.font=u.toString(10)+"px "+this.settings.font,(w=s.measureText(b[0]).width)>.95*i?this.settings.size.factor-=m:w<.9*i?this.settings.size.factor+=m:$=!0,(p+=1)>1e4&&($=!0);this.destroyCanvas(l),this.settings.size.factor-=m}if(this.settings.color.increment={r:(this.settings.color.end.r-this.settings.color.start.r)/this.settings.range,g:(this.settings.color.end.g-this.settings.color.start.g)/this.settings.range,b:(this.settings.color.end.b-this.settings.color.start.b)/this.settings.range,a:(this.settings.color.end.a-this.settings.color.start.a)/this.settings.range},this.ngx=Math.floor(this.size.width/this.settings.gridSize),this.ngy=Math.floor(this.size.height/this.settings.gridSize),this.grid=[],l=e+this.container.attr("id"),this.ctx=this.createCanvas({parent:this.container,id:l,width:this.size.width,height:this.size.height,left:"0px",top:"0px"}),this.bctx=this.createCanvas({id:d,width:1,height:1,left:0,top:0}),this.bctx.fillStyle=this.settings.color.background.rgba,this.bctx.clearRect(0,0,1,1),this.bctx.fillStyle=this.settings.color.background.rgba,this.bctx.fillRect(0,0,1,1),this.bgPixel=this.bctx.getImageData(0,0,1,1).data,"function"!=typeof this.settings.options.color&&"random"!==this.settings.options.color.substr(0,6)&&"gradient"!==this.settings.options.color.substr(0,8)){for(this.bctx.fillStyle=this.colorToRGBA(this.settings.options.color).rgba,this.bctx.fillRect(0,0,1,1),n=this.bctx.getImageData(0,0,1,1).data,h=4;h--;)if(Math.abs(n[h]-this.bgPixel[h])>10){this.diffChannel=h;break}}else this.diffChannel=NaN;for(this.destroyCanvas(d),r=this.ngx;r--;)for(this.grid[r]=[],o=this.ngy;o--;)this.grid[r][o]=!0;return this.ctx.fillStyle=this.settings.color.background.rgba,this.ctx.clearRect(0,0,this.ngx*(this.settings.gridSize+1),this.ngy*(this.settings.gridSize+1)),this.ctx.fillRect(0,0,this.ngx*(this.settings.gridSize+1),this.ngy*(this.settings.gridSize+1)),this.ctx.textBaseline="top",h=0,window.setImmediate(function t(){!(h>=a.words.length)&&(a.putWord(a.words[h][0],a.words[h][1],a.words[h][2],a.words[h][3]),h+=1,window.setImmediate(t))}),a.allDone(l),!0},allDone:function(e){var i=this,s=document.getElementById(e);t("#"+e).width(this.size.screenWidth),t("#"+e).height(this.size.screenHeight),t("#"+e).css("display","block"),t("#"+e).css("visibility","visible"),s.addEventListener("mousemove",function(e){var n=0,r=0;(e.layerX||0===e.layerX)&&(n=e.layerX,r=e.layerY),n-=s.offsetLeft,n+=t(s).position().left,n=Math.floor(n*i.settings.options.printMultiplier),r-=s.offsetTop,r+=t(s).position().top,r=Math.floor(r*i.settings.options.printMultiplier),i.match=null;for(var o=0,a=i.linkTable.length;o<a;o++){var h=i.linkTable[o];n>=h.x&&n<=h.x+h.width&&r>=h.y&&r<=h.y+h.height&&(i.match=h)}null!==i.match?document.body.style.cursor="pointer":document.body.style.cursor=""},!1),s.addEventListener("click",function(t){null!==i.match&&(i.match.target?window.open(i.match.link,i.match.target):window.location=i.match.link)},!1)},minimumFontSize:function(){for(var t,i,s=e+"FontTest",n=this.createCanvas({id:s,width:50,height:50,left:0,top:0}),r=20;r;){if(n.font=r.toString(10)+"px sans-serif",n.measureText("Ｗ").width===t&&n.measureText("m").width===i)return this.destroyCanvas(s),(r+1)/2;t=n.measureText("Ｗ").width,i=n.measureText("m").width,r-=1}return this.destroyCanvas(s),0},createCanvas:function(e){var i,s=e.id,n=t("body");return void 0!==e.parent&&(n=e.parent),n.append('<canvas id="'+s+'" width="'+e.width+'" height="'+e.height+'">.</canvas>'),t("#"+s).css("visibility","hidden"),t("#"+s).css("display","none"),t("#"+s).css("position","relative"),t("#"+s).css("z-index",1e4),t("#"+s).width(e.width),t("#"+s).height(e.height),t("#"+s).offset({top:e.top,left:e.left}),(i=document.getElementById(s)).setAttribute("width",e.width),i.setAttribute("height",e.height),i.getContext("2d")},destroyCanvas:function(e){t("#"+e).remove()},putWord:function(t,i,s,n){var r,o,a,h,l,g,f,d,c,$,u,m,_,b,p,w=this,y=Math.random()<this.settings.options.rotationRatio,x=this.settings.weightFactor(i),v=null,k=null;if(x<=this.settings.minSize)return!1;for(this.ctx.font=x.toString(10)+"px "+this.settings.font,y?(v=this.ctx.measureText(t).width,k=Math.max(x,this.ctx.measureText("m").width,this.ctx.measureText("Ｗ").width),/[Jgpqy]/.test(t)&&(k*=1.5),k+=Math.floor(x/6),v+=Math.floor(x/6)):(k=this.ctx.measureText(t).width,v=Math.max(x,this.ctx.measureText("m").width,this.ctx.measureText("Ｗ").width),/[Jgpqy]/.test(t)&&(v*=1.5),v+=Math.floor(x/6),k+=Math.floor(x/6)),k=Math.ceil(k),v=Math.ceil(v),h=Math.ceil(k/this.settings.gridSize),l=Math.ceil(v/this.settings.gridSize),g=[this.ngx/2,this.ngy/2],f=Math.floor(Math.sqrt(this.ngx*this.ngx+this.ngy*this.ngy)),d=this.ngx+this.ngy,c=f+1;c--;){for($=d,p=[];$--;)u=this.settings.shape($/d*2*Math.PI),p.push([Math.floor(g[0]+(f-c)*u*Math.cos(-$/d*2*Math.PI)-h/2),Math.floor(g[1]+(f-c)*u*this.settings.ellipticity*Math.sin(-$/d*2*Math.PI)-l/2),$/d*2*Math.PI]);if(p.shuffle().some(function(g){return!!w.canFitText(g[0],g[1],h,l)&&(o=Math.floor(g[0]*w.settings.gridSize+(h*w.settings.gridSize-k)/2),a=Math.floor(g[1]*w.settings.gridSize+(l*w.settings.gridSize-v)/2),y?(b=e+"Rotator",_=w.createCanvas({id:b,width:k,height:v,left:0,top:0}),m=document.getElementById(b),_.fillStyle=w.settings.color.background.rgba,_.fillRect(0,0,k,v),_.fillStyle=w.wordcolor(t,i,x,f-c,g[2]),_.font=x.toString(10)+"px "+w.settings.font,_.textBaseline="top",y&&(_.translate(0,v),_.rotate(-Math.PI/2)),_.fillText(t,Math.floor(x/6),0),w.ctx.clearRect(o,a,k,v),w.ctx.drawImage(m,o,a,k,v),w.destroyCanvas(b)):(r=x.toString(10)+"px "+w.settings.font,w.ctx.font=r,w.ctx.fillStyle=w.wordcolor(t,i,x,f-c,g[2]),w.ctx.fillText(t,o,a),v=w.getTextHeight(r).height,k=w.ctx.measureText(t).width),null!==s&&w.linkTable.push({x:o,y:a,width:k,height:v,word:t,link:s,target:n}),w.updateGrid(g[0],g[1],h,l),!0)}))return!0}return!1},canFitText:function(t,e,i,s){if(t<0||e<0||t+i>this.ngx||e+s>this.ngy)return!1;for(var n,r=i;r--;)for(n=s;n--;)if(!this.grid[t+r][e+n])return!1;return!0},wordcolor:function(t,e,i,s,n){var r=null;switch(this.settings.options.color){case"gradient":r="rgba("+Math.round(this.settings.color.start.r+this.settings.color.increment.r*(e-this.settings.weight.lowest))+","+Math.round(this.settings.color.start.g+this.settings.color.increment.g*(e-this.settings.weight.lowest))+","+Math.round(this.settings.color.start.b+this.settings.color.increment.b*(e-this.settings.weight.lowest))+","+Math.round(this.settings.color.start.a+this.settings.color.increment.a*(e-this.settings.weight.lowest))+")";break;case"random-dark":r="rgba("+Math.floor(128*Math.random()).toString(10)+","+Math.floor(128*Math.random()).toString(10)+","+Math.floor(128*Math.random()).toString(10)+",1)";break;case"random-light":r="rgba("+Math.floor(128*Math.random()+128).toString(10)+","+Math.floor(128*Math.random()+128).toString(10)+","+Math.floor(128*Math.random()+128).toString(10)+",1)";break;default:r="function"!=typeof this.settings.wordColor?"rgba(127,127,127,1)":this.settings.wordColor(t,e,i,s,n)}return r},updateGrid:function(t,e,i,s,n){for(var r,o=i,a=this.ctx.getImageData(t*this.settings.gridSize,e*this.settings.gridSize,i*this.settings.gridSize,s*this.settings.gridSize);o--;)for(r=s;r--;)this.isGridEmpty(a,o*this.settings.gridSize,r*this.settings.gridSize,i*this.settings.gridSize,s*this.settings.gridSize,n)||(this.grid[t+o][e+r]=!1)},isGridEmpty:function(t,e,i,s,n,r){var o,a,h=this.settings.gridSize;if(isNaN(this.diffChannel)||r){for(;h--;)for(o=this.settings.gridSize;o--;)for(a=4;a--;)if(this.getChannelData(t.data,e+h,i+o,s,n,a)!==this.bgPixel[a])return!1}else for(;h--;)for(o=this.settings.gridSize;o--;)if(this.getChannelData(t.data,e+h,i+o,s,n,this.diffChannel)!==this.bgPixel[this.diffChannel])return!1;return!0},getChannelData:function(t,e,i,s,n,r){return t[(i*s+e)*4+r]},colorToRGBA:function(t){3===(t=t.replace(/^\s*#|\s*$/g,"")).length&&(t=t.replace(/(.)/g,"$1$1")),t=t.toLowerCase();var e,i,s,n,r,o,a,h,l,g,f={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},d=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),1]}},{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d+(?:\.\d+)?|\.\d+)\s*\)/,example:["rgb(123, 234, 45, 1)","rgb(255,234,245, 0.5)"],process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),1]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),1]}}];for(r in f)t===r&&(t=f[r]);for(o=0;o<d.length;o++)a=d[o].re,h=d[o].process,(l=a.exec(t))&&(e=(g=h(l))[0],i=g[1],s=g[2],n=g[3]);return e=e<0||isNaN(e)?0:e>255?255:e,i=i<0||isNaN(i)?0:i>255?255:i,{r:e,g:i,b:s=s<0||isNaN(s)?0:s>255?255:s,a:n=n<0||isNaN(n)?0:n>1?1:n,rgba:"rgba("+e+", "+i+", "+s+", "+n+")"}},getTextHeight:function(e){var i=t('<span style="font: '+e+'">Hg</span>'),s=t('<div style="display: inline-block; width: 1px; height: 0px;"></div>'),n=t("<div></div>"),r=t("body"),o={};n.append(i,s),r.append(n);try{o={},s.css({verticalAlign:"baseline"}),o.ascent=s.offset().top-i.offset().top,s.css({verticalAlign:"bottom"}),o.height=s.offset().top-i.offset().top,o.descent=o.height-o.ascent}finally{n.remove()}return o}}}(jQuery),Array.prototype.shuffle=function(){"use strict";for(var t,e,i=this.length;i;t=parseInt(Math.random()*i,10),e=this[--i],this[i]=this[t],this[t]=e);return this},window.setImmediate||(window.setImmediate=window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(window.postMessage&&window.addEventListener){var t,e=[],i=-1,s=-1,n="zero-timeout-message",r=function(t){return e.push(t),window.postMessage(n,"*"),++s},o=function(t){t.data===n&&(t.stopPropagation(),e.length>0)&&(e.shift()(),i+=1)};return window.addEventListener("message",o,!0),window.clearImmediate=function(n){"number"==typeof n&&!(n>s)&&(e[t=n-i-1]=function(){})},r}}()||function(t){window.setTimeout(t,0)}),window.clearImmediate||(window.clearImmediate=window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(t){window.clearTimeout(t)});